{include file="public/left_nav" /}
<style type="text/css">
    table{
   
    table-layout:fixed;/* 只有定义了表格的布局算法为fixed，下面td的定义才能起作用。 */
}
td{
    width:100%;
    word-break:keep-all;/* 不换行 */
    white-space:nowrap;/* 不换行 */
    overflow:hidden;/* 内容超出宽度时隐藏超出部分的内容 */
    text-overflow:ellipsis;/* 当对象内文本溢出时显示省略标记(...) ；需与overflow:hidden;一起使用。*/
}

</style>
<div class="layui-body" style="background-color:#f2f2f2">
    <div style="padding: 10px; background-color: #F2F2F2;">
        <div class="layui-row layui-col-space15">
            <div class="layui-col-md12">
                <div class="layui-card">
                    <div class="layui-card-body">
                        
                        <div class="layui-form-item"> 
                             <a style="float: left;margin-right: 10px;" class="layui-btn  btn-chouj-choose layui-btn-sm layui-btn-normal" href="__APP__/admin/app/add" style="color:#fff">添加</a>
                             <!--  <button class="layui-btn test" style="float: right;" lay-data="{accept: 'file'}">上传文件</button> -->
                        </div>
                        
                        <div class="layui-form">
                            <table class="layui-table" style="table-layout:fixed;" id="test" lay-filter="test">
                            <thead>
                            	<th>id</th>
                            	<th>名称</th>
                            	<th>LOGO</th>
                            	<th style="width:100px;">ios下载地址</th>
                                <th style="width:100px;">安卓下载地址</th>
                            	<th  style="width:100px;">官网</th>
                            	<th>排序</th>
                            	<th>上传时间</th>
                                <th>操作</th>
                            </thead>
                            <tbody>
                            {volist name='list' id='item'}
                            <tr>
                            	<td>{$item['id']}</td>
                            	<td>{$item['title']}</td>
                            	<td><img src="__PUBLIC__/uploads/{$item['logo']}"></td>
                            	<td>{$item['ios']}</td>
                                <td>{$item['android']}</td>
                            	<td>{$item['url']}</td>
                            	<td>{$item['sock']}</td>
                            	<td>{$item['createtime']|date="Y-m-d H:i",###}</td>
                                <td><a href="__APP__/admin/app/add?id={$item['id']}" class="layui-btn">修改</a> <button data-id='{$item['id']}' class="layui-btn layui-btn-danger del">删除</button></td>
                            </tr>
                            {/volist}
                            </tbody>
                            </table>
                            {$list->render()}
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script type="text/javascript">
    $('.del').each(function(){
        $(this).click(function(){
            var id = $(this).attr('data-id');
            layer.confirm('确认删除该数据吗？', {
              btn: ['确定', '取消'] //可以无限个按钮
              
            }, function(index, layero){
                $.ajax({
                    url:'__APP__/admin/app/del',
                    type:'post',
                    dataType:'json',
                    data:{
                        id:id
                    },
                    success:function(res){
                        layer.close(index);
                        if(res.code==0){
                            layer.msg('删除成功',{shift:-1},function(){
                                window.location.href=location;
                            })
                        }else{
                            layer.msg('删除失败');
                        }
                    }
                })
            }, function(index){
              layer.close(index);
            });
        })
    })
</script>